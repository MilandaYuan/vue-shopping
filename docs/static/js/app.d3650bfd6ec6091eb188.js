webpackJsonp([7],{"6lbb":function(t,n){},Cpzh:function(t,n,e){"use strict";e.d(n,"c",function(){return o}),e.d(n,"f",function(){return r}),e.d(n,"e",function(){return i}),e.d(n,"b",function(){return a}),e.d(n,"a",function(){return c}),e.d(n,"d",function(){return u});var o="DECREASE_COUNT",r="INCREASE_COUNT",i="GET_CART_LIST",a="CHECK_SINGLE",c="CHECK_ALL",u="DELETE_BOOK_IN_CARTLIST"},N6bE:function(t,n){},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("7+uW"),r=[{path:"/home",classA:"icon-ai-home",classB:"icon-shouye1",isA:!1,name:"首页"},{path:"/list",classA:"icon-shuxingliebiaoxiangqing2",classB:"icon-shuxingliebiaoxiangqing",isA:!1,name:"列表页"},{path:"/collect",classA:"icon-gouwuche-copy",classB:"icon-gouwuche3",isA:!1,name:"购物车"},{path:"/add",classA:"icon-tianjia1",classB:"icon-tianjia",isA:!1,name:"添加"}],i={name:"tab",data:function(){return{paths:r}},watch:{$route:"toggle"},methods:{toggle:function(){var t=this.$route.path;this.paths.map(function(n){n.isA=t===n.path})}}},a={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"footer"},t._l(t.paths,function(n){return e("router-link",{key:n.name,attrs:{to:{path:n.path}}},[e("i",{staticClass:"iconfont",class:[n.isA?n.classA:n.classB]}),t._v(" "),e("span",[t._v(t._s(n.name))])])}))},staticRenderFns:[]};var c=e("VU/8")(i,a,!1,function(t){e("N6bE")},"data-v-18c36c2a",null).exports,u=e("Cpzh"),s={name:"App",components:{Tab:c}},f={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"app"}},[n("transition",{attrs:{name:"fadeIn"}},[n("keep-alive",[this.$route.meta.keepAlive?n("router-view"):this._e()],1)],1),this._v(" "),n("transition",{attrs:{name:"fadeIn"}},[this.$route.meta.keepAlive?this._e():n("router-view")],1),this._v(" "),n("Tab")],1)},staticRenderFns:[]};var l=e("VU/8")(s,f,!1,function(t){e("6lbb")},null,null).exports,d=e("/ocq");o.default.use(d.a);var p,m=new d.a({routes:[{path:"/",redirect:"/home"},{path:"/home",component:function(){return Promise.all([e.e(0),e.e(1)]).then(e.bind(null,"lO7g"))},meta:{keepAlive:!0,title:"首页"}},{path:"/collect",component:function(){return Promise.all([e.e(0),e.e(2)]).then(e.bind(null,"QV70"))},meta:{title:"购物车"}},{path:"/detail/:bid",component:function(){return Promise.all([e.e(0),e.e(4)]).then(e.bind(null,"wHgX"))},name:"detail",meta:{title:"详情"}},{path:"/add",component:function(){return Promise.all([e.e(0),e.e(3)]).then(e.bind(null,"il+h"))},meta:{title:"添加"}},{path:"/list",component:function(){return Promise.all([e.e(0),e.e(5)]).then(e.bind(null,"tcnj"))},meta:{title:"列表"}},{path:"*",redirect:"/home"}]}),h=e("NYxO"),b=e("sax8"),g=e.n(b),k={total:function(t){return t.cartList.reduce(function(t,n){return n.isChecked?t+n.cartCount*n.bookPrice:t},0)}},v=e("bOdI"),C=e.n(v),I=e("Gu7T"),L=e.n(I),_=(p={},C()(p,u.e,function(t,n){t.cartList=n}),C()(p,u.f,function(t,n){var e=t.cartList.find(function(t){return t.bookId===n.bookId});t.cartList=e?t.cartList.map(function(t){return t.bookId===n.bookId?(n.isChecked=t.isChecked,n):t}):[].concat(L()(t.cartList),[n])}),C()(p,u.c,function(t,n){t.cartList.find(function(t){return t.bookId===n.bookId})&&(t.cartList=t.cartList.map(function(t){return t.bookId===n.bookId?(n.isChecked=t.isChecked,n):t}))}),C()(p,u.b,function(t,n){console.log(11),t.cartList=t.cartList.map(function(t){return t.bookId===n?(t.isChecked=!t.isChecked,t):t})}),C()(p,u.a,function(t,n){t.cartList=t.cartList.map(function(t){return t.isChecked=n,t})}),C()(p,u.d,function(t,n){t.cartList=t.cartList.filter(function(t){return t.bookId!==n})}),p),A=e("gyMJ"),j={increaseCount:function(t,n){var e=t.commit;Object(A.f)(n).then(function(t){e(u.f,t)})},decreaseCount:function(t,n){var e=t.commit;Object(A.b)(n).then(function(t){e(u.c,t)})},getCartList:function(t){var n=t.commit;Object(A.d)().then(function(t){n(u.e,t)})}};o.default.use(h.a);for(var E=new h.a.Store({state:{cartList:[]},getters:k,mutations:_,actions:j,plugins:[g.a],strict:!0}),N=(e("v2ns"),e("cTzj")),O=e.n(N),T=e("Au9i"),S=e.n(T),w=(e("d8/S"),e("zmct")),x=e.n(w),y=e("zNUS"),P=e.n(y),R=[],B="https://milanda.oss-cn-beijing.aliyuncs.com/",H=[B+"bag1.jpg",B+"bag2.jpg",B+"bag3.jpg",B+"bag4.jpg",B+"bag5.jpg",B+"bag6.jpg"],$=[B+"banner2.jpg",B+"banner3.jpg"],z=0;z<30;z++)R.push(P.a.mock({"bookCover|+1":H,bookName:"@title(1)",bookInfo:"@sentence(3, 5) ",bookPrice:"@float(160, 2000, 0, 2)",bookId:"@increment",cartCount:0,isChecked:!1}));function J(t){var n=t.url;return parseInt(n.match(/\d+/)[0])}var M=function(){return $},U=function(){return R.slice(0,6)},F=function(t){if(t.url.indexOf("id")>0){var n=J(t),e=R.find(function(t){return t.bookId===n});return e||(e={}),e}return R},G=function(t){console.log(t);var n=J(t),e=JSON.parse(t.body);return console.log(e),R=R.map(function(t){return t.bookId===n?(console.log(n),e):t}),e},K=function(t){var n=JSON.parse(t.body);return n.bookId=R.length?R[R.length-1].bookId+1:1,n.cartCount=0,n.isChecked=!1,R.unshift(n),n},q=function(t){var n=J(t);R=R.filter(function(t){return t.bookId!==n})},Q=function(t){var n=t.url.match(/\d+/)[0],e=parseInt(n)||0,o=R.slice(e,e+5),r=!0;return R.length<=e+5&&(r=!1),{hasMore:r,books:o}},V=function(){return R.filter(function(t){return t.cartCount>0})},W=function(t){var n=J(t),e="";return R=R.map(function(t){return t.bookId===n?((e=t).cartCount++,e):t}),e},D=function(t){var n=J(t),e="";return R=R.map(function(t){return t.bookId===n?((e=t).cartCount>1&&e.cartCount--,e):t}),e};P.a.mock(/\/sliders/,"get",M),P.a.mock(/\/hot/,"get",U),P.a.mock(/\/book/,"get",F),P.a.mock(/\/book/,"put",G),P.a.mock(/\/book/,"post",K),P.a.mock(/\/book/,"delete",q),P.a.mock(/\/page/,"get",Q),P.a.mock(/\/cart/,"get",V),P.a.mock(/\/cart/,"post",W),P.a.mock(/\/cart/,"delete",D);var Y=e("7QTg"),X=e.n(Y);o.default.config.productionTip=!1,o.default.use(X.a),o.default.use(O.a,{preLoad:1.3,error:"https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=11971430,2548688016&fm=200&gp=0.jpg",loading:"http://img.lanrentuku.com/img/allimg/1212/5-121204193R5-50.gif",attempt:1}),o.default.use(S.a),o.default.use(x.a),m.beforeEach(function(t,n,e){document.title=t.meta.title,e()}),new o.default({el:"#app",router:m,components:{App:l},template:"<App/>",store:E})},"d8/S":function(t,n){},gyMJ:function(t,n,e){"use strict";e.d(n,"c",function(){return i}),e.d(n,"h",function(){return a}),e.d(n,"e",function(){return c}),e.d(n,"i",function(){return u}),e.d(n,"a",function(){return s}),e.d(n,"g",function(){return f}),e.d(n,"f",function(){return l}),e.d(n,"d",function(){return d}),e.d(n,"b",function(){return p});var o=e("mtWM"),r=e.n(o);r.a.interceptors.response.use(function(t){return t.data});var i=function(){return r.a.all([r.a.get("/sliders"),r.a.get("/hot")])},a=function(t){return r.a.delete("/book?id="+t)},c=function(t){return r.a.get("/book?id="+t)},u=function(t,n){return r.a.put("/book?id="+t,n)},s=function(t){return r.a.post("/book",t)},f=function(t){return r.a.get("/page?offset="+t)},l=function(t){return r.a.post("/cart?id="+t)},d=function(){return r.a.get("/cart")},p=function(t){return r.a.delete("/cart?id="+t)}},v2ns:function(t,n){}},["NHnr"]);
//# sourceMappingURL=app.d3650bfd6ec6091eb188.js.map